# Блог

## Структура проекта

.
├── app/ # Бизнес-логика
│ ├── DB/ # Запросы к базе данных
│ └── Page/ # Классы страниц (статья, ошибка, главная, категория)
│ └──── Param/ # Обработка GET-параметров (пагинация, сортировка)
├── data/ # Данные для импорта
├── docker/ # Конфигурация Docker
├── html/ # Шаблоны
├── .env.example # Пример файла переменных окружения
└── ...


## База данных

Дамп структуры находится в `docker/data/db_dump/02_dump.sql`.  
Особенности:
- Категории, просмотры и файлы могут прикрепляться не только к статьям, но и к другим типам сущностей.
- Можно вынести контент (title, description, метатеги) в отдельную таблицу.

## Установка

1. **Разместите файлы**  
   Скопируйте содержимое папки `docker` в удобное место (например, `/opt/sites`).  
   *Примечание: папка с проектом и docker могут находиться на одном уровне.*

2. **Замените плейсхолдеры**  
   Найдите все вхождения строки `xxxxxxxxx` и замените на реальные значения:

```bash
   grep -rl xxxxxxxxx ./
```

Настройте переменные окружения
Скопируйте .env.example в .env и заполните три обязательных параметра.

Установите зависимости

```bash
composer install
npm install
npm run build
```

Запустите контейнеры

```bash
docker compose up -d --build
```

Импортируйте начальные данные
Перейдите по адресу вашего сайта, добавив параметр ?seed

## Дополнительно

Все страницы (статья, ошибка, главная, категория) являются объектами классов из пространства App\Page\*. Каждый класс реализует метод render() для отображения.
У классов, наследующих DBPage, есть поля id и временные метки.

Категория (App\Page\Category) поддерживает сортировку и пагинацию.

Ключи в конфигурации:
    param – имя GET-параметра (например, page/p для пагинации, order_by/ob, order_type/ot для сортировки);
    filters – массив значений, которые учитываются при формировании ссылок (нужно для корректной совместной работы пагинации и сортировки);
    link – базовая ссылка на страницу.